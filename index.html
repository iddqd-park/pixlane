<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PixLane</title>
    
    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&display=swap" rel="stylesheet">
    
    <!-- Bootstrap 5 CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
    
    <!-- Custom CSS -->
    <link rel="stylesheet" href="css/style.css">
</head>
<body>

    <div id="app-container">
        <!-- Left: Canvas Area -->
        <div id="canvas-area">
            <div id="canvas-placeholder">
                <div class="mb-3">
                    <svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" fill="currentColor" class="bi bi-cloud-upload" viewBox="0 0 16 16">
                        <path fill-rule="evenodd" d="M4.406 1.342A5.53 5.53 0 0 1 8 0c2.69 0 4.923 2 5.166 4.579C14.758 4.804 16 6.137 16 7.773 16 9.569 14.502 11 12.687 11H10a.5.5 0 0 1 0-1h2.688C13.979 10 15 8.988 15 7.773c0-1.216-1.02-2.228-2.313-2.228h-.5v-.5C12.188 2.825 10.328 1 8 1a4.53 4.53 0 0 0-2.941 1.1c-.757.652-1.153 1.438-1.153 2.055v.448l-.445.049C2.064 4.805 1 5.952 1 7.318 1 8.785 2.23 10 3.781 10H6a.5.5 0 0 1 0 1H3.781C1.708 11 0 9.366 0 7.318c0-1.763 1.266-3.223 2.942-3.593.143-.863.698-1.723 1.464-2.383z"/>
                        <path fill-rule="evenodd" d="M7.646 4.146a.5.5 0 0 1 .708 0l3 3a.5.5 0 0 1-.708.708L8.5 5.707V14.5a.5.5 0 0 1-1 0V5.707L5.354 7.854a.5.5 0 1 1-.708-.708l3-3z"/>
                    </svg>
                </div>
                <h5>Drop image here or Click to upload</h5>
            </div>
            <canvas id="main-canvas"></canvas>
        </div>
        <!-- Hidden Input (Moved outside to prevent click recursion) -->
        <input type="file" id="file-input" accept="image/*" style="display: none;">

        <!-- Right: Control Panel -->
        <div id="control-panel">
            <h1>PixLane</h1>
            <p id="app-desc" class="text-white-50 small mb-4">Round the corners of images/screenshots, add beautiful backgrounds, blur sensitive personal information, and save them.</p>

                <!-- Corner Radius Control -->
                <div class="mb-4">
                    <label class="fw-bold mb-2" id="lbl-radius">Corner Radius</label>
                    <div class="btn-group w-100 mb-2" role="group" id="radius-group">
                        <button type="button" class="btn btn-outline-secondary active" data-radius="0">0</button>
                        <button type="button" class="btn btn-outline-secondary" data-radius="12">12</button>
                        <button type="button" class="btn btn-outline-secondary" data-radius="24">24</button>
                        <button type="button" class="btn btn-outline-secondary" data-radius="36">36</button>
                        <button type="button" class="btn btn-outline-secondary" data-radius="48">48</button>
                    </div>
                    <div class="form-check form-switch">
                        <input class="form-check-input" type="checkbox" id="shadow-toggle" checked>
                        <label class="form-check-label" for="shadow-toggle" id="lbl-shadow">Drop Shadow</label>
                    </div>
                </div>

                <!-- Padding Control -->
                <div class="mb-4">
                    <div class="d-flex justify-content-between align-items-center mb-2">
                        <label class="fw-bold" id="lbl-padding">Padding</label>
                        <div class="form-check form-switch">
                            <input class="form-check-input" type="checkbox" id="padding-lock" checked>
                            <label class="form-check-label" for="padding-lock">Link</label>
                        </div>
                    </div>
                    
                    <div class="row g-2">
                        <div class="col-6">
                            <label class="small text-muted">Top</label>
                            <input type="range" class="form-range padding-control" id="pad-top" min="0" max="200" value="0">
                        </div>
                        <div class="col-6">
                            <label class="small text-muted">Bottom</label>
                            <input type="range" class="form-range padding-control" id="pad-bottom" min="0" max="200" value="0">
                        </div>
                        <div class="col-6">
                            <label class="small text-muted">Left</label>
                            <input type="range" class="form-range padding-control" id="pad-left" min="0" max="200" value="0">
                        </div>
                        <div class="col-6">
                            <label class="small text-muted">Right</label>
                            <input type="range" class="form-range padding-control" id="pad-right" min="0" max="200" value="0">
                        </div>
                    </div>
                </div>

                <!-- Background Control -->
                <div class="mb-4">
                    <label class="fw-bold mb-2" id="lbl-background">Background</label>
                    <div id="bg-grid" class="d-flex flex-wrap gap-2">
                        <!-- Generated by JS -->
                    </div>
                </div>

                <!-- Blur Control -->
                <div class="mb-4">
                    <div class="d-flex justify-content-between align-items-center mb-2">
                        <label class="fw-bold" id="lbl-blur">Blur</label>
                        <button class="btn btn-sm btn-outline-danger" id="btn-clear-blur">Clear All</button>
                    </div>
                    <div class="btn-group w-100" role="group" id="blur-group">
                        <button type="button" class="btn btn-outline-secondary" data-blur="0">None</button>
                        <button type="button" class="btn btn-outline-secondary" data-blur="4">Low</button>
                        <button type="button" class="btn btn-outline-secondary active" data-blur="8">Default</button>
                        <button type="button" class="btn btn-outline-secondary" data-blur="16">Max</button>
                    </div>
                </div>

                <!-- Save Actions -->
                <div class="mb-3">
                    <div class="btn-group w-100">
                        <button type="button" class="btn btn-primary dropdown-toggle" data-bs-toggle="dropdown" aria-expanded="false" id="btn-save-dropdown" disabled>
                            Save Image
                        </button>
                        <ul class="dropdown-menu w-100">
                            <li><a class="dropdown-item btn-save" href="#" data-format="image/png">PNG</a></li>
                            <li><a class="dropdown-item btn-save" href="#" data-format="image/jpeg" data-quality="1.0">JPEG (100%)</a></li>
                            <li><a class="dropdown-item btn-save" href="#" data-format="image/jpeg" data-quality="0.8">JPEG (80%)</a></li>
                        </ul>
                    </div>
                </div>

            <div class="mt-auto">
                <button id="btn-reset" class="btn btn-outline-danger w-100 mb-3" disabled>Reset</button>
                <div class="text-center">
                    <a href="https://iddqd.kr" target="_blank" class="iddqd-link text-secondary text-decoration-none small">powered by IDDQD Internet</a>
                </div>
            </div>
        </div>
    </div>

    <!-- jQuery -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <!-- Bootstrap Bundle JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
    <!-- Custom JS -->
    <script src="js/app.js"></script>
</body>
</html>
